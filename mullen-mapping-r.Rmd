---
title: "first_maps"
author: "Pete"
date: "10/07/2014"
output: html_document
---
This is my attempt to work through a mix of Lincoln's historic mapping tutorial: http://dh-r.lincolnmullen.com/mapping.html And Bivand, et al's ASDAR http://www.asdar-book.org/



```{r}
library(rgdal)
library(sp)
library(rgeos)
library(maptools)
library(ggmap)
library(ggplot2)

#load libraries

map_sp <- readOGR("nhgis-shp/", "state_1850") 
plot(map_sp, col = "grey")
title("United States, 1850")

#First plot

earth <- readOGR("naturalearth/50m_physical/", "ne_50m_land")
plot(earth, col = "gray"); title("Whitney's Queendom")

#Second plot - Whitney was starting to get a little more into DH at this point.

winkel <- spTransform(earth, CRS("+proj=wintri"))
plot(winkel, col="gray")
title("Whitney's world according to Oswald Winkel")
#Second plot transformed into a new projection

cities <- data.frame(name = c("Saint Louis, MO", "San Francisco, CA", "Boston, MA", "Charleston, SC", "Houston, TX"), stringsAsFactors=FALSE)
#Created a list of cities

cities_geocoded <- geocode(cities$name)
cities <- cbind(cities, cities_geocoded)
#Gave them a lat/long via ggmap's google map function and binded those fields to my cities DF

ggplot(cities, aes(x=lon, y = lat)) +
  geom_point() + 
  geom_text(aes(label=name), vjust = -1) + 
  coord_map()
#Drew a plot of my cities in space using lat/long and labeled with the "name" column.

map_df <- fortify(map_sp, region = "GISJOIN")
#turn the sp into a data frame object.
map_1850 <- ggplot() + 
  geom_map(data = map_df,
           map = map_df, 
  aes(x=long, y=lat, group = group, map_id = id),
  fill = "white",
  color = "black",
  size = 0.2) +
coord_map() +
  theme_minimal()
#And make a map with ggplot
map_1850 +
  geom_point(data = cities, aes(x = lon, y = lat), color = "red", size = 3) + 
  geom_text(data = cities, aes(x = lon, y = lat, label=name), vjust = -1)
#Add the "Cities" Data to our 1850 map. Voila!


#Now a plot of the Paulist missions on the 1850 map:
devtools::install_github("lmullen/historydata")
library(dplyr)
library(historydata)
#adding new packages

data(paulist_missions)
#adding paulist missions data frame

map_1850 + 
  geom_point(data = paulist_missions, 
             aes(x=long, y = lat, size = confessions),
             color="red", shape = 1) +
  theme(legend.position="bottom") + 
  scale_size(range = c(2, 8)) + 
  ggtitle("Paulist missions as points")

#Paulist missions with Density instead of points
map_1850 +
  geom_hex(data = paulist_missions, 
           aes(x = long, y = lat)) +
  theme(legend.position = "bottom") +
  ggtitle("Paulist Missions with hex bin")

#Paulist missions with density plot
map_1850 +
  geom_density2d(data = paulist_missions, 
           aes(x = long, y = lat)) +
  theme(legend.position = "bottom") +
  ggtitle("Paulist Missions with density plot")


```



```{r}

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
